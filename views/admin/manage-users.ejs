<%- include('admin-main', { title: 'Account Management', body: `
    <h1 class="text-2xl font-bold text-gray-800 mb-4">Accounts Management</h1>
    <p class="text-gray-600">Page for managing accounts in the store.</p>

    <!-- Nội dung chính -->
    <div class="mt-4 bg-white shadow-md rounded-lg p-4">
        <table class="min-w-full border">
            <thead class="bg-gray-100">
                <tr>
                    <th class="px-4 py-2 text-left">Username</th>
                    <th class="px-4 py-2 text-left">Email</th>   
                    <th class="px-4 py-2 text-left">Role</th>   
                    <th class="px-4 py-2 text-left">Action</th>
                </tr>
            </thead>
    ` }) %>            
            <tbody>
                <% if (users && users.length > 0) { %> 
                    <% users.forEach(function(user) { %>
                        <tr>
                            <td class="border px-4 py-2"><%= user.username %></td>
                            <td class="border px-4 py-2"><%= user.email %></td>                                                                           
                            <td class="border px-4 py-2"><%= user.role === 1 ? "Admin" : "Customer" %></td>                   
                            <td class="border px-4 py-2">

                                <div class="flex space-x-2">
                                    <button onclick="showModal('<%= user._id %>')" 
                                        class="bg-blue-500 hover:bg-blue-700 text-white text-sm px-3 py-1 rounded-md shadow">
                                        View Details
                                    </button>   
                                    <form action="/admin/manage-users/<%= user._id %>/ban" method="POST">
                                        <button type="submit" class="bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1 rounded-md shadow">
                                            <%= user.status === 1 ? "Ban" : "Unban" %>
                                        </button>
                                    </form>
                                </div>                                
                            </td>
                        </tr>  
                        <div id="userModal_<%= user._id %>" class="hidden fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center">
                            <div class="bg-white p-6 rounded-lg shadow-lg">
                                <h2 class="text-2xl font-semibold">User Account Details</h2>
                                <div id="modalContent_<%= user._id %>">
                                    <!-- Render thông tin tài khoản người dùng -->
                                    <p><strong>User ID:</strong> <%= user._id %></p>
                                    <p><strong>FullName:</strong> <%= user.fullname %></p>
                                    <p><strong>Username</strong>:</strong> <%= user.username %></p>
                                    <p><strong>Email:</strong> <%= user.email %></p>
                                    <p><strong>Role:</strong> <%= user.role === 1 ? "Admin" : "Customer" %></p>                                   
                                    <p><strong>Status:</strong> <%= user.status === 1 ? "Active" : "Inactive" %></p>                                                                
                                    <p><strong>Joined At:</strong> <%= String(user.createdAt).replace(" ", ", ") %></p>                                
                                </div>
                                <div class="text-center">
                                    <button onclick="closeModal('<%= user._id %>')" class="mt-4 bg-red-500 text-white px-4 py-2 rounded-md">Close</button>
                                </div>
                            </div>
                        </div>    
                                    
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="9" class="text-center py-4 text-gray-500">
                            No Account Found!
                        </td>
                    </tr>

                    
                    
                    
                <% } %>
            </tbody>
        </table>        
    </div>
    <script>
        // Hàm mở modal
        function showModal(userId) {
            const modal = document.getElementById(`userModal_${userId}`);
            modal.classList.remove('hidden');
        }

        // Hàm đóng modal
        function closeModal(userId) {
            const modal = document.getElementById(`userModal_${userId}`);
            modal.classList.add('hidden');
        }

        // Đảm bảo modal đóng khi người dùng nhấn ra ngoài
        window.onclick = function(event) {
            if (event.target.classList.contains('fixed')) {
                event.target.classList.add('hidden');
            }
        };

    </script>